<%= hidden_field_tag :direction, params[:direction]%>
<%= hidden_field_tag :sort, params[:sort]%>

<div>
    <div class="toolbar">

      <div class="sort-by">
        <ul class="sort-by-list">
          <li class="sort-by-option">
            <%= #link_to "Name", :sort => "name"
                  sortable "name" %>
          </li>
          <li class="sort-by-option">
            <%= #link_to "Era", :sort => "era" 
                  sortable "era" %>
          </li>
          <li class="sort-by-option">
            <%= #link_to "Diet", :sort => "diet"
                  sortable "diet" %>
          </li>
        </ul>
      </div>
      <%= will_paginate @dinosaurs, inner_window: 2, outter_window: 0, previous_label: "PREV", next_label: "NEXT"%>
    </div>

    
    <% if @dinosaurs.count > 0 %>

      <div class="row">
        <% @dinosaurs.each do |dinosaur| %>

          <!-- Thumbnail -->
          <div class="col-sm-6 col-md-4">
            <div class="thumbnail">
              <div class="dino-img-wrapper">
                  <%= image_tag(dinosaur.image_url, class: "dino-img", alt: dinosaur.name)%>
                </div>
              <div class="caption">
                <h3><%= dinosaur.name %></h3>
                <label><%= dinosaur.era %></label><br>
                <label><%= dinosaur.diet %></label><br>
                <p><%= truncate(dinosaur.description, length: 100) %></p>
                <p><button data-target="#<%= dinosaur.name %>" data-toggle="modal" class="btn btn-primary" type="button">More Info</button> </p>
              </div>
            </div>
          </div>

          <!-- Modal -->
          <div class="modal fade" id=<%= dinosaur.name %> tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header modal-primary">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title" id="myModalLabel"><%= dinosaur.name %></h4>
                </div>
                <div class="modal-body">
                  <div class="container-fluid">
                    <div class="dino-img-wrapper">
                      <%= image_tag(dinosaur.image_url, class: "dino-img", alt: dinosaur.name)%>
                    </div>
                    <p>
                      <div class="row">
                        <b class="col-sm-4 col-sm-offset-2 text-left">Era:</b> <span class="col-sm-4 text-left"><%= dinosaur.era %></span>
                      </div>
                      <div class="row">
                        <b class="col-sm-4 col-sm-offset-2 text-left">Diet:</b> <span class="col-sm-4 text-left"><%= dinosaur.diet%></span>
                      </div>
                      <div class="row">
                        <b class="col-sm-4 col-sm-offset-2 text-left">Order:</b> <span class="col-sm-4 text-left"><%= dinosaur.taxonomic_order%></span>
                      </div>
                      <div class="row">
                        <b class="col-sm-4 col-sm-offset-2 text-left">Length:</b> <span class="col-sm-4 text-left"><%= dinosaur.length%></span>
                      </div>
                      <div class="row">
                        <b class="col-sm-4 col-sm-offset-2 text-left">Location:</b> <span class="col-sm-4 text-left"><%= dinosaur.location%></span>
                      </div>
                    </p>
                    <p>
                      <%= dinosaur.description %>
                    </p>
                  </div>
                  
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>

    <% else %>

      <h2>No Dinosaurs Found! </h2>
      <%= image_tag("dead-friends.png", class: "no-dino-image") %>

    <% end %>
  <%= will_paginate @dinosaurs, inner_window: 2, outter_window: 0, previous_label: "PREV", next_label: "NEXT"%>
</div>

